"use strict";(self.webpackChunkmy_training_app=self.webpackChunkmy_training_app||[]).push([[678],{7672:function(e,n,t){var r=t(2791),i=t(6313);n.Z=function(e){var n=(0,i.QB)();return(0,r.useEffect)((function(){n(e)})),null}},7678:function(e,n,t){t.r(n),t.d(n,{default:function(){return Qe}});var r=t(3967),i=t(5193),s=t(8870),a=t(890),l=t(3767),o=t(1413),c=t(9439),d=t(1333),u=t(6563),x=t(3504),m=t(2829),h=t(1993),f=t(1661),Z=t(3459),p=t(6872),g=t(184),j=function(){var e=(0,Z.C)(f.t2),n=(0,x.lr)(),t=(0,c.Z)(n,1)[0],r=(0,m.Z)(t.get(p.eB.page));return(null===r||r<=0)&&(r=1),(0,g.jsx)(d.Z,{size:"small",page:r,count:e||1,color:"primary",siblingCount:1,renderItem:function(e){var n=(0,h.Z)(t.toString(),p.eB.page,String(e.page));return(0,g.jsx)(u.Z,(0,o.Z)((0,o.Z)({},e),{},{component:x.rU,to:n}))}})},v=t(5861),b=t(5987),y=t(7757),S=t.n(y),C=t(3099),w=t(3400),k=t(7391),I=t(5705),D=t(1725),E=function(e){var n=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),i=String(n),s=String(t);s.length<2&&(s="0"+s);var a=String(r);return a.length<2&&(a="0"+a),"".concat(i,"-").concat(s,"-").concat(a)},N=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},T=t(22),F=t(2791),_=["form","field"],M=new Date(Date.UTC(2e3,1,1,0,0,0)),P=function(e){var n=e.removeFilterByDateFromUrl,t=(0,I.u6)().resetForm;return(0,g.jsx)(w.Z,{"aria-label":"clear filter",onClick:function(){t(),n()},children:(0,g.jsx)(T.Z,{sx:{fontSize:"3rem"}})})},B=function(e){var n=e.dateFilter,t=(0,I.u6)(),r=t.setFieldValue;t.values;return(0,F.useEffect)((function(){var e=function(e,n){var t=function(e){var n=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===n||void 0===n?void 0:n[1]),Number(null===n||void 0===n?void 0:n[2])-1,Number(null===n||void 0===n?void 0:n[3]))}(e);N(t)&&r(n,t)};if(n){var t=n.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);null!==t&&void 0!==t&&t[1]&&e(t[1],"start-date"),null!==t&&void 0!==t&&t[2]&&e(t[2],"end-date")}else r("start-date",null),r("end-date",null)}),[n]),null},L=function(e,n,t){e&&N(e)?e>new Date?t[n]="Future date not allowed":e<M&&(t[n]="Date before ".concat(M.toLocaleString("pl-PL",{timeZone:"UTC"}).split(",")[0])):t[n]="Enter valid date"};function q(e){var n=e.form,t=e.field,r=(0,b.Z)(e,_),i=n.errors[t.name],s=n.touched[t.name]&&!!i;return(0,g.jsx)(C.M,(0,o.Z)({mask:"__.__.____",disableFuture:!0,allowSameDateSelection:!0,openTo:"month",views:["year","month","day"],minDate:M,value:t.value,onChange:function(e){n.setFieldValue(t.name,e,!0)},renderInput:function(e){return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"standard",name:t.name,error:s,helperText:s&&i?i:" ",onBlur:n.handleBlur}))}},r))}var V=function(e){var n={},t=e["start-date"],r=e["end-date"];return L(t,"start-date",n),L(r,"end-date",n),null!==r&&null!==t&&r<=t&&(n["end-date"]="End date after start date"),n},A=function(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.down("sm"),{noSsr:!0}),t=(0,x.lr)(),a=(0,c.Z)(t,2),o=a[0],d=a[1],u=o.get(p.eB.filterByDate);return(0,g.jsx)(s.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,g.jsx)(I.J9,{initialValues:{"start-date":null,"end-date":null},validate:V,onSubmit:function(){var e=(0,v.Z)(S().mark((function e(n,t){var r,i,s;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=n["start-date"],i=n["end-date"],s=(0,h.Z)(o.toString(),p.eB.filterByDate,"from-"+E(r)+"-to-"+E(i)),d(s)}finally{t.setSubmitting(!1)}case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),children:(0,g.jsx)(s.Z,{children:(0,g.jsx)(I.l0,{noValidate:!0,children:(0,g.jsxs)(l.Z,{spacing:n?1:3,direction:n?"column":"row",alignItems:"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,g.jsx)(B,{dateFilter:u}),(0,g.jsx)(I.gN,{name:"start-date",component:q,label:"Start date"}),(0,g.jsx)(I.gN,{name:"end-date",component:q,label:"End date"}),(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(D.Z,{variant:"outlined",size:"large",sx:{},children:"Filter"}),o.get(p.eB.filterByDate)?(0,g.jsx)(P,{removeFilterByDateFromUrl:function(){d((0,h.Z)(o.toString(),p.eB.filterByDate))}}):null]})]})})})})})},z=t(3433),O=t(5855),R=t(3449),W=function(e){var n=e.element,t=e.index;return(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(R.Z,{children:t+1}),(0,g.jsx)(R.Z,{children:n.load&&"-"!==n.load?n.load:"-"}),(0,g.jsx)(R.Z,{children:n.quantity})]})},Y=t(7630),G=t(1478),H=t(1055),U=t(5818),Q=t(3721),$=(0,Y.ZP)((function(e){return(0,g.jsx)(H.Z,(0,o.Z)({elevation:2,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),J=(0,Y.ZP)((function(e){return(0,g.jsx)(U.Z,(0,o.Z)({expandIcon:(0,g.jsx)(G.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),K=(0,Y.ZP)(Q.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),X=t(1131),ee=function(e){var n=e.summaryId,t=e.summaryText,r=e.summaryIcons,i=e.children,s=(0,F.useState)(!1),o=(0,c.Z)(s,2),d=o[0],u=o[1];return(0,g.jsxs)($,{TransitionProps:{unmountOnExit:!0},expanded:d,onChange:function(){return u((function(e){return!e}))},sx:{maxWidth:"100%","& .MuiAccordionSummary-content":{maxWidth:"calc(100% - 24px)"}},children:[(0,g.jsx)(J,{"aria-controls":n,id:n,expandIcon:(0,g.jsx)(X.Z,{}),sx:{},children:(0,g.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{maxWidth:"100%"},flexGrow:1,children:[(0,g.jsx)(a.Z,{sx:{textOverflow:"ellipsis",overflow:"hidden"},children:t}),r]})}),(0,g.jsx)(K,{children:i})]})},ne=t(1161),te=t(2207),re=t(9281),ie=t(6890),se=t(7488),ae=t(5574),le=t(5661),oe=t(9157),ce=t(1691),de=t(7123),ue=t(6151),xe=t(3239),me=t(8005),he=t(6871),fe=t(2898),Ze=t(7247),pe=t(2419),ge=t(1286),je=t(3694),ve=function(e){var n=e.exercise,t=e.training_id,r=e.exerciseIndex,i=e.exercises,l=e.setExerciseDialogState,o=n.series.map((function(e){return e.quantity})).join(", "),d=(0,F.useState)(!1),u=(0,c.Z)(d,2),x=u[0],m=u[1],h=(0,Z.T)(),p=(0,he.TH)(),j=(0,f.MZ)(),b=(0,c.Z)(j,1)[0],y=(0,je.k)(),C="exercise_".concat(n._id),w=function(){m(!1)},k=function(){var e=(0,v.Z)(S().mark((function e(){var n;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=(0,z.Z)(i)).splice(r,1),e.next=5,h((0,me.rK)({_id:t,exercises:n,urlQuery:p.search})).unwrap();case 5:y("Exercise deleted","info"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to add exercise:",e.t0);case 11:return e.prev=11,w(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(ee,{summaryId:C,summaryText:"".concat(n.name,": [").concat(o.length?o:"no series","]"),summaryIcons:(0,g.jsx)(s.Z,{sx:{position:"relative",width:"5rem"},onClick:function(e){return e.stopPropagation()},children:(0,g.jsxs)(ne.Z,{ariaLabel:"Edit options",direction:"left",FabProps:{size:"small",color:"primary"},sx:{position:"absolute",top:"0px",right:"0px",transform:"translateY(-50%)","& .MuiButtonBase-root":{width:"2rem",height:"2rem",minHeight:"unset"}},icon:(0,g.jsx)(fe.Z,{}),children:[(0,g.jsx)(te.Z,{icon:(0,g.jsx)(Ze.Z,{}),tooltipTitle:"Delete exercise",onClick:function(e){m(!0)}}),(0,g.jsx)(te.Z,{icon:(0,g.jsx)(pe.Z,{}),tooltipTitle:"Add exercise",onClick:function(){l({open:!0,index:r})}}),(0,g.jsx)(te.Z,{icon:(0,g.jsx)(ge.Z,{}),tooltipTitle:"Edit exercise",onClick:function(){l({open:!0,index:r,initialValues:n})}})]})}),children:(0,g.jsxs)(re.Z,{component:"table",sx:{"& .MuiTableCell-root":{pl:"0.25rem",pr:"0.25rem",textAlign:"center"}},children:[(0,g.jsx)(ie.Z,{children:(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(R.Z,{children:(0,g.jsx)(a.Z,{children:"Nr"})}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(a.Z,{children:"Load\xa0(kg)"})}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(a.Z,{children:"Quantity"})})]})}),(0,g.jsx)(se.Z,{children:n.series.map((function(e,n){return(0,g.jsx)(W,{element:e,index:n},e._id)}))})]})}),(0,g.jsxs)(ae.Z,{open:x,onClose:w,"aria-labelledby":"delete-exercise-dialog-title","aria-describedby":"delete-exercise-dialog-description",children:[(0,g.jsx)(le.Z,{id:"delete-exercise-dialog-title",children:"Delete exercise confirmation"}),(0,g.jsx)(oe.Z,{children:(0,g.jsxs)(ce.Z,{id:"delete-exercise-dialog-description",children:["Do you really want to delete exercise"," ",(0,g.jsx)("strong",{children:n.name}),"?"]})}),(0,g.jsxs)(de.Z,{children:[(0,g.jsx)(ue.Z,{onClick:w,children:"No"}),(0,g.jsxs)(ue.Z,{onClick:k,autoFocus:!0,disabled:"IDLE"!==b,children:["PROCESSING"===b&&(0,g.jsx)(xe.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},be=t(1889),ye=function(e){var n=e.onClick;return(0,g.jsx)(w.Z,{"aria-label":"delete",onClick:n,children:(0,g.jsx)(Ze.Z,{})})},Se=t(9276),Ce=t(9823),we=t(8970),ke=t(4647),Ie=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(e.target.value.match(/^\d*$/)||r&&"-"===e.target.value)&&n.setFieldValue(t.name,e.target.value)},De=function(e){var n={};return e.name.length||(n.name="Required"),e.name.length>100&&(n.name="Max ".concat(100," signs")),e.comment.length>255&&(n.comment="Max ".concat(255," signs")),n.series=[],e.series.forEach((function(e,t){if("-"!==e.load){var r=Number(e.load);(Number.isNaN(r)||r<0||r>999)&&(n.series[t]={load:"<0,999>"})}var i=Number(e.quantity);""===e.quantity?n.series[t]=(0,o.Z)((0,o.Z)({},n.series[t]),{},{quantity:"Required"}):(Number.isNaN(i)||i<1||i>999)&&(n.series[t]=(0,o.Z)((0,o.Z)({},n.series[t]),{},{quantity:"<1,999>"}))})),n.series.length||delete n.series,n},Ee=function(e){var n=e.exerciseDialogState,t=e.setExerciseDialogState,r=e.trainingSession,i=(0,je.k)(),s=(0,f.MZ)(),d=(0,c.Z)(s,1)[0],u=(0,Z.T)(),x=(0,he.TH)(),m=(0,F.useRef)(!1),h=(0,F.useState)(null),p=(0,c.Z)(h,2),j=p[0],b=p[1],y=(0,F.useRef)(null);(0,F.useEffect)((function(){var e;y.current&&(null===y||void 0===y||null===(e=y.current)||void 0===e||e.focus(),y.current=null,b(null))}),[y,j]);var C=function(){t({open:!1})},E=function(){var e=(0,v.Z)(S().mark((function e(t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u((0,me.rK)({_id:null!==r&&void 0!==r&&r._id?r._id:"",exercises:t,urlQuery:x.search})).unwrap();case 3:i(n.initialValues?"Exercise Updated":"Exercise Added","success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to add exercise: ",e.t0);case 9:return e.prev=9,C(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(ae.Z,{open:n.open,onClose:C,scroll:"paper","aria-labelledby":"add-edit-exercise-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(le.Z,{id:"add-edit-exercise-dialog-title",children:[n.initialValues?"Update Exercise":"Add Exercise",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:C,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(Ce.Z,{})})]}),(0,g.jsx)(I.J9,{initialValues:n.initialValues?{_id:n.initialValues._id,name:n.initialValues.name,comment:n.initialValues.comment,series:n.initialValues.series.reduce((function(e,n){return e.concat([{key:(0,ke.x0)(),load:n.load,quantity:n.quantity}])}),[])}:{name:"",comment:"",series:[]},validate:De,onSubmit:function(){var e=(0,v.Z)(S().mark((function e(t,i){var s,a,l,c,d,u,x;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=11;break}return m.current=!0,e.prev=2,(x=(0,z.Z)(null!==(s=null===r||void 0===r?void 0:r.exercises)&&void 0!==s?s:[])).splice((null!==(a=n.index)&&void 0!==a?a:null===r||void 0===r?void 0:r.exercises.length)||0,n.initialValues?1:0,(0,o.Z)((0,o.Z)({},t._id?{_id:t._id}:void 0),{},{name:null!==(l=t.name)&&void 0!==l?l:"",comment:null!==(c=t.comment)&&void 0!==c?c:"",series:null!==(d=null===(u=t.series)||void 0===u?void 0:u.reduce((function(e,n){return e.concat([{load:"-"!==n.load&&n.load?n.load:0,quantity:n.quantity}])}),[]))&&void 0!==d?d:[]})),e.next=7,E(x);case 7:return e.prev=7,m.current=!1,i.setSubmitting(!1),e.finish(7);case 11:case"end":return e.stop()}}),e,null,[[2,,7,11]])})));return function(n,t){return e.apply(this,arguments)}}(),children:(0,g.jsxs)(I.l0,{noValidate:!0,autoComplete:"off",children:[(0,g.jsx)(oe.Z,{dividers:!0,sx:{opacity:"PROCESSING"===d?.5:1},children:(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(I.gN,{name:"name",children:function(e){var n=e.field,t=(e.form,e.meta);return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},(0,we.Y)(n,t)),{},{margin:"dense",fullWidth:!0,label:"Exercise name",variant:"filled",inputProps:{maxLength:100},autoFocus:!0}))}}),(0,g.jsx)(I.gN,{name:"comment",children:function(e){var n=e.field,t=(e.form,e.meta);return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},(0,we.Y)(n,t)),{},{margin:"dense",fullWidth:!0,label:"Exercise comment",multiline:!0,variant:"filled",inputProps:{maxLength:255}}))}}),(0,g.jsx)(I.F2,{name:"series",children:function(e){var n=e.remove,t=(e.move,e.swap,e.push),r=e.insert,i=(e.unshift,e.pop,e.form);return(0,g.jsxs)(g.Fragment,{children:[i.values.series&&i.values.series.length>0?(0,g.jsx)(l.Z,{children:(0,g.jsxs)(re.Z,{component:"table",sx:{"& .MuiTableCell-root":{padding:"0 0.25rem",textAlign:"center"},"& .MuiTableCell-body":{padding:"0.4rem 0.25rem"}},children:[(0,g.jsx)(ie.Z,{children:(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(R.Z,{}),(0,g.jsx)(R.Z,{children:"Nr"}),(0,g.jsx)(R.Z,{children:"Load\xa0(kg)"}),(0,g.jsx)(R.Z,{children:"Quantity"}),(0,g.jsx)(R.Z,{})]})}),(0,g.jsx)(se.Z,{children:i.values.series.map((function(e,t){return(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(R.Z,{children:(0,g.jsx)(w.Z,{"aria-label":"delete series",onClick:function(){return n(t)},children:(0,g.jsx)(Ze.Z,{})})}),(0,g.jsx)(R.Z,{children:(0,g.jsxs)(a.Z,{variant:"h5",children:[" ",t+1]})}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(I.gN,{name:"series.[".concat(t,"].load"),children:function(e){var n=e.field,r=e.form,i=e.meta;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},(0,we.Y)(n,i)),{},{onChange:function(e){Ie(e,r,n,!0)},hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},inputRef:j===t?y:null,sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}}))}})}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(I.gN,{name:"series.[".concat(t,"].quantity"),children:function(e){var n=e.field,t=e.form,r=e.meta;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},(0,we.Y)(n,r)),{},{onChange:function(e){Ie(e,t,n)},hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}}))}})}),(0,g.jsx)(R.Z,{children:(0,g.jsx)(w.Z,{"aria-label":"add series",onClick:function(){r(t,{key:(0,ke.x0)(),load:"",quantity:""}),b(t)},children:(0,g.jsx)(pe.Z,{})})})]},"series.[".concat(t,"].key"))}))})]})}):void 0,(0,g.jsx)(ue.Z,{variant:"outlined",startIcon:(0,g.jsx)(pe.Z,{}),onClick:function(){t({key:(0,ke.x0)(),load:"",quantity:""}),b(i.values.series.length)},sx:{mt:i.values.series.length>0?"1.6rem":"0.4rem",mb:"0.8rem"},children:"Add series"})]})}})]})}),(0,g.jsxs)(de.Z,{children:[(0,g.jsx)(ue.Z,{onClick:C,children:"Cancel"}),(0,g.jsx)(D.Z,{size:"large",actionStatus:d,children:n.initialValues?"Update":"Add"})]})]})})]})},Ne=function(e){var n=new Date(e),t=String(n.getFullYear()),r=String(n.getMonth()+1),i=String(n.getDate()),s=String(n.getHours()),a=String(n.getMinutes()),l=function(e){return e.length<2?"0"+e:e};return r=l(r),i=l(i),s=l(s),a=l(a),"".concat(i,"-").concat(r,"-").concat(t," ").concat(s,":").concat(a)},Te=function(e){var n=e._id,t=(0,Z.C)((function(e){return(0,f.Th)(e,n)})),r=F.useState(!1),i=(0,c.Z)(r,2),s=i[0],a=i[1],l=F.useState({open:!1}),o=(0,c.Z)(l,2),d=o[0],u=o[1],m=(0,Z.T)(),h=(0,he.TH)(),j=(0,x.lr)(),b=(0,c.Z)(j,2)[1],y=(0,je.k)(),C=(0,f.MZ)(),w=(0,c.Z)(C,1)[0],k="session_".concat(n),I="";t&&(I=Ne(t.date));var D=function(){a(!1)},E=function(){var e=(0,v.Z)(S().mark((function e(){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m((0,me.j7)({_id:n,query:h.search?h.search:p.rg,setSearchParams:b}));case 3:y("Training session deleted","info"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to delete training session:",e.t0);case 9:return e.prev=9,D(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(be.ZP,{component:"li",item:!0,sx:{maxWidth:"100%"},children:[(0,g.jsxs)(ee,{summaryId:k,summaryText:I,summaryIcons:(0,g.jsx)(ye,{onClick:function(e){e.stopPropagation(),a(!0)}}),children:[null===t||void 0===t?void 0:t.exercises.map((function(e,n){return(0,g.jsx)(ve,{exercise:e,training_id:t._id,exerciseIndex:n,exercises:t.exercises,setExerciseDialogState:u},e._id)})),(0,g.jsx)(Se.Z,{sx:{display:"flex",justifyContent:"center",mt:"1.5rem",mb:"0.5rem","&:first-of-type":{m:"1rem 0"}},children:(0,g.jsx)(ue.Z,{variant:"outlined",startIcon:(0,g.jsx)(pe.Z,{}),onClick:function(){return u({open:!0})},children:"Add Exercise"})})]}),(0,g.jsx)(Ee,{exerciseDialogState:d,setExerciseDialogState:u,trainingSession:t}),(0,g.jsxs)(ae.Z,{open:s,onClose:D,"aria-labelledby":"delete-training-session-dialog-title","aria-describedby":"delete-training-session-dialog-description",children:[(0,g.jsx)(le.Z,{id:"delete-training-session-dialog-title",children:"Delete training confirmation"}),(0,g.jsx)(oe.Z,{children:(0,g.jsxs)(ce.Z,{id:"delete-training-session-dialog-description",children:["Do you really want to delete training from"," ",(0,g.jsx)("strong",{children:t?Ne(t.date):""}),"?"]})}),(0,g.jsxs)(de.Z,{children:[(0,g.jsx)(ue.Z,{onClick:D,children:"No"}),(0,g.jsxs)(ue.Z,{onClick:E,autoFocus:!0,disabled:"IDLE"!==w,children:["PROCESSING"===w&&(0,g.jsx)(xe.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},Fe=F.memo(Te),_e=t(9658);var Me=function(){var e=(0,f.MZ)(),n=(0,c.Z)(e,1)[0],t=(0,f.mh)(),r=(0,Z.T)(),i=(0,x.lr)(),l=(0,c.Z)(i,1)[0],o=(0,F.useState)(!1),d=(0,c.Z)(o,2),u=d[0],m=d[1],h=l.toString();(0,F.useEffect)((function(){var e=null,n=function(){var n=(0,v.Z)(S().mark((function n(){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=r((0,me.LH)({searchParams:h})),n.next=4,e;case 4:return n.prev=4,u||m(!0),n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[0,,4,7]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){var n;"function"===typeof(null===(n=e)||void 0===n?void 0:n.abort)&&e.abort()}}),[h,r]);var p=null;if("FAILED"===n&&u)p=(0,g.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(_e.Z,{variant:"filled",severity:"error",children:"Operation failed, no data."})});else{var j=null;u&&(t.length?j=(0,g.jsx)(s.Z,{sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsx)(be.ZP,{component:"ul",container:!0,direction:"column",rowSpacing:{xs:1,sm:2,md:3},sx:{listStyle:"none","& >.MuiGrid-item":{maxWidth:"100%"}},children:null===t||void 0===t?void 0:t.map((function(e){return(0,g.jsx)(Fe,{_id:e},e)}))})}):"IDLE"===n&&(j=(0,g.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(_e.Z,{variant:"filled",severity:"info",children:"No data."})}))),p=(0,g.jsxs)(s.Z,{sx:{position:"relative"},children:[j,"PROCESSING"!==n||t.length?null:(0,g.jsxs)(s.Z,{sx:{position:"absolute",top:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"20rem",height:"100%"},children:[(0,g.jsx)(xe.Z,{size:120,sx:{marginBottom:"1rem"}}),(0,g.jsx)(a.Z,{children:"Loading..."})]})]})}return(0,g.jsx)(s.Z,{mt:"1.5rem",children:p})},Pe=t(9877),Be=function(e){var n={};return L(e.date,"date",n),e.comment.length>255&&(n.comment="Max ".concat(255," signs")),n},Le=function(){var e=(0,f.MZ)(),n=(0,c.Z)(e,1)[0],t=(0,F.useState)("IDLE"),r=(0,c.Z)(t,2)[1],i=(0,Z.T)(),s=(0,he.TH)(),a=(0,F.useState)(!1),d=(0,c.Z)(a,2),u=d[0],x=d[1],m=(0,F.useRef)(!1),h=(0,je.k)(),p=function(){x(!1)},j=function(){var e=(0,v.Z)(S().mark((function e(n,t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r("PROCESSING"),e.next=4,i((0,me.fs)({trainingSession:{date:n.toISOString(),comment:t,exercises:[]},urlQuery:s.search})).unwrap();case 4:h("Training session added","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to add new training session:",e.t0);case 10:return e.prev=10,r("IDLE"),p(),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Pe.Z,{size:"medium",color:"secondary","aria-label":"add training session",sx:{marginLeft:"auto"},onClick:function(){x(!0)},children:(0,g.jsx)(pe.Z,{})}),(0,g.jsxs)(ae.Z,{open:u,onClose:p,scroll:"paper","aria-labelledby":"add-training-session-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(le.Z,{id:"add-training-session-dialog-title",children:["Add Training Session",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:p,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(Ce.Z,{})})]}),(0,g.jsx)(I.J9,{initialValues:{date:new Date,comment:""},validate:Be,onSubmit:function(){var e=(0,v.Z)(S().mark((function e(n,t){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=10;break}return m.current=!0,e.prev=2,e.next=5,j(n.date,n.comment);case 5:return e.prev=5,m.current=!1,p(),t.setSubmitting(!1),e.finish(5);case 10:case"end":return e.stop()}}),e,null,[[2,,5,10]])})));return function(n,t){return e.apply(this,arguments)}}(),children:(0,g.jsxs)(I.l0,{noValidate:!0,children:[(0,g.jsx)(oe.Z,{dividers:!0,sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(I.gN,{name:"date",component:q,label:"Training date"}),(0,g.jsx)(I.gN,{name:"comment",children:function(e){var n=e.field,t=(e.form,e.meta);return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({id:"comment"},(0,we.Y)(n,t)),{},{margin:"normal",fullWidth:!0,label:"Comment",multiline:!0,variant:"filled",inputProps:{maxLength:255},autoFocus:!0}))}})]})}),(0,g.jsxs)(de.Z,{children:[(0,g.jsx)(ue.Z,{onClick:p,children:"Cancel"}),(0,g.jsx)(D.Z,{size:"large",actionStatus:n,children:"Add"})]})]})})]})]})},qe=t(7672),Ve=t(8096),Ae=t(4925),ze=t(9321),Oe=t(3786),Re=function(e){var n=(0,F.useState)((function(){return e})),t=(0,c.Z)(n,2),r=t[0],i=t[1];return(0,F.useLayoutEffect)((function(){r!==e&&i(e)}),[e]),[r,i]},We=function(e){return(0,p.jr)(e,p.T4,p.D$)},Ye=function(e,n,t,r){var i=(0,h.Z)(e.toString(),t,r);n(i=(0,h.Z)(i,p.eB.page))},Ge=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=We((0,m.Z)(t.get(p.eB.items))),s=Re(i),a=(0,c.Z)(s,2),l=a[0],o=a[1];return(0,g.jsxs)(Ve.Z,{variant:"standard",sx:{m:1,minWidth:"5rem"},children:[(0,g.jsx)(Ae.Z,{id:"nr-of-items-on-page-label",children:"Show Items"}),(0,g.jsxs)(ze.Z,{labelId:"nr-of-items-on-page-label",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=We(Number(e.target.value));o(n),Ye(t,r,p.eB.items,String(n))},label:"Show Items",children:[(0,g.jsx)(Oe.Z,{value:p.T4,children:p.T4}),(0,g.jsx)(Oe.Z,{value:p.Mt,children:p.Mt}),(0,g.jsx)(Oe.Z,{value:p.v$,children:p.v$})]})]})},He=function(e){return(0,p.jr)(e,p.iQ,p.cv)},Ue=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=He(t.get(p.eB.sortDateOrder)),s=Re(i),a=(0,c.Z)(s,2),l=a[0],o=a[1];return(0,g.jsxs)(Ve.Z,{variant:"standard",sx:{m:0,minWidth:120},children:[(0,g.jsx)(Ae.Z,{id:"trainings-sort-order",children:"Sort"}),(0,g.jsxs)(ze.Z,{labelId:"trainings-sort-order",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=He(e.target.value);o(n),Ye(t,r,p.eB.sortDateOrder,n)},label:"Sort",children:[(0,g.jsx)(Oe.Z,{value:"date-descending",children:"Date descending"}),(0,g.jsx)(Oe.Z,{value:"date-ascending",children:"Date ascending"})]})]})},Qe=function(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.up("lg"),{noSsr:!0});return(0,qe.Z)("Trainings"),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(s.Z,{component:"section",children:[(0,g.jsxs)($,{sx:{mb:3},children:[(0,g.jsx)(J,{expandIcon:(0,g.jsx)(X.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,g.jsx)(a.Z,{children:"Filters"})}),(0,g.jsx)(K,{sx:{mb:{xs:"1.3rem",lg:"0.5rem"},pt:"1.5rem"},children:(0,g.jsxs)(l.Z,{direction:n?"row":"column",alignItems:n?"start":"center",justifyContent:n?"space-between":"center",spacing:5,sx:{flexWrap:"wrap"},children:[(0,g.jsx)(A,{}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,sx:{},children:[(0,g.jsx)(Ge,{}),(0,g.jsx)(Ue,{})]})]})})]}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{mt:"1rem"},children:[(0,g.jsx)(j,{}),(0,g.jsx)(Le,{})]})]}),(0,g.jsxs)(s.Z,{component:"section",sx:{maxWidth:"100%",mt:"1rem"},children:[(0,g.jsx)(a.Z,{variant:"h5",component:"h1",children:"Trainings:"}),(0,g.jsx)(Me,{})]})]})}}}]);
//# sourceMappingURL=678.06e141e4.chunk.js.map