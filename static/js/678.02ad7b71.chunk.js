"use strict";(self.webpackChunkmy_training_app=self.webpackChunkmy_training_app||[]).push([[678],{7672:function(e,n,t){var r=t(2791),i=t(6313);n.Z=function(e){var n=(0,i.QB)();return(0,r.useEffect)((function(){n(e)})),null}},7678:function(e,n,t){t.r(n),t.d(n,{default:function(){return We}});var r=t(3967),i=t(5193),a=t(8870),s=t(890),l=t(3767),o=t(1413),c=t(9439),d=t(1333),u=t(6563),x=t(3504),m=t(2829),f=t(1993),h=t(1661),p=t(3459),Z=t(6872),g=t(184),j=function(){var e=(0,p.C)(h.t2),n=(0,x.lr)(),t=(0,c.Z)(n,1)[0],r=(0,m.Z)(t.get(Z.eB.page));return(null===r||r<=0)&&(r=1),(0,g.jsx)(d.Z,{size:"small",page:r,count:e||1,color:"primary",siblingCount:1,renderItem:function(e){var n=(0,f.Z)(t.toString(),Z.eB.page,String(e.page));return(0,g.jsx)(u.Z,(0,o.Z)((0,o.Z)({},e),{},{component:x.rU,to:n}))}})},v=t(5861),S=t(5987),b=t(7757),y=t.n(b),C=t(3099),w=t(3400),k=t(7391),I=t(6151),D=function(e){var n=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),i=String(n),a=String(t);a.length<2&&(a="0"+a);var s=String(r);return s.length<2&&(s="0"+s),"".concat(i,"-").concat(a,"-").concat(s)},E=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},T=t(22),N=t(2791),F=t(1134),_=["field","fieldState"],M=new Date(Date.UTC(2e3,1,1,0,0,0)),P=function(e){var n=e.removeFilterByDateFromUrl,t=e.reset;return(0,g.jsx)(w.Z,{type:"button","aria-label":"clear filter",onClick:function(){t(),n()},children:(0,g.jsx)(T.Z,{sx:{fontSize:"3rem"}})})},V=function(e,n){return(0,N.useEffect)((function(){var t=function(e,t){var r=function(e){var n=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===n||void 0===n?void 0:n[1]),Number(null===n||void 0===n?void 0:n[2])-1,Number(null===n||void 0===n?void 0:n[3]))}(e);E(r)&&n(t,r,{shouldValidate:!0})};if(e){var r=e.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);null!==r&&void 0!==r&&r[1]&&t(r[1],"start-date"),null!==r&&void 0!==r&&r[2]&&t(r[2],"end-date")}else n("start-date",null),n("end-date",null)}),[e]),null},L={validDate:function(e){return!!e&&E(e)||"Enter valid date"},notFutureDate:function(e){return!!e&&e<new Date||"Future date not allowed"},notBeforeMinAllowedDate:function(e){return!!e&&e>M||"Date before ".concat(M.toLocaleString("pl-PL",{timeZone:"UTC"}).split(",")[0])}};function B(e){var n=e.field,t=e.fieldState,r=(0,S.Z)(e,_);return(0,g.jsx)(C.M,(0,o.Z)({mask:"__.__.____",disableFuture:!0,allowSameDateSelection:!0,openTo:"month",views:["year","month","day"],minDate:M,value:n.value,onChange:n.onChange,inputRef:n.ref,renderInput:function(e){var r;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},e),{},{name:n.name,variant:"standard",error:t.invalid,helperText:t.invalid?null===(r=t.error)||void 0===r?void 0:r.message:" ",onBlur:n.onBlur}))}},r))}var q=function(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.down("sm"),{noSsr:!0}),t=(0,x.lr)(),s=(0,c.Z)(t,2),d=s[0],u=s[1],m=(0,F.cI)({defaultValues:{"start-date":null,"end-date":null},mode:"all",criteriaMode:"firstError",shouldUnregister:!0}),h=m.handleSubmit,p=m.reset,j=m.setValue,S=m.control,b=(0,m.watch)("start-date"),C=d.get(Z.eB.filterByDate);V(C,j);var w=function(){var e=(0,v.Z)(y().mark((function e(n){var t,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=n["start-date"],r=n["end-date"],i=(0,f.Z)(d.toString(),Z.eB.filterByDate,"from-"+D(t)+"-to-"+D(r)),u(i)}finally{}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(a.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,g.jsx)("form",{noValidate:!0,onSubmit:h(w),children:(0,g.jsxs)(l.Z,{spacing:n?1:3,direction:n?"column":"row",alignItems:"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(B,{field:n,fieldState:t,label:"Start date"})},name:"start-date",control:S,rules:{validate:(0,o.Z)({},L)}}),(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(B,{field:n,fieldState:t,label:"End date"})},name:"end-date",control:S,rules:{validate:(0,o.Z)((0,o.Z)({},L),{},{afterStartDate:function(e){return null!==e&&null!==b&&e>b||"End date after start date"}})}}),(0,g.jsxs)(a.Z,{children:[(0,g.jsx)(I.Z,{type:"submit",size:"large",variant:"outlined",children:"Filter"}),d.get(Z.eB.filterByDate)?(0,g.jsx)(P,{removeFilterByDateFromUrl:function(){u((0,f.Z)(d.toString(),Z.eB.filterByDate))},reset:p}):null]})]})})})},R=t(3433),A=t(5855),O=t(3449),z=function(e){var n=e.element,t=e.index;return(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:t+1}),(0,g.jsx)(O.Z,{children:n.load&&"-"!==n.load?n.load:"-"}),(0,g.jsx)(O.Z,{children:n.quantity})]})},Q=t(7630),G=t(1478),W=t(1055),U=t(5818),H=t(3721),Y=(0,Q.ZP)((function(e){return(0,g.jsx)(W.Z,(0,o.Z)({elevation:2,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),$=(0,Q.ZP)((function(e){return(0,g.jsx)(U.Z,(0,o.Z)({expandIcon:(0,g.jsx)(G.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),K=(0,Q.ZP)(H.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),J=t(1131),X=function(e){var n=e.summaryId,t=e.summaryText,r=e.summaryIcons,i=e.children,a=(0,N.useState)(!1),o=(0,c.Z)(a,2),d=o[0],u=o[1];return(0,g.jsxs)(Y,{TransitionProps:{unmountOnExit:!0},expanded:d,onChange:function(){return u((function(e){return!e}))},sx:{maxWidth:"100%","& .MuiAccordionSummary-content":{maxWidth:"calc(100% - 24px)"}},children:[(0,g.jsx)($,{"aria-controls":n,id:n,expandIcon:(0,g.jsx)(J.Z,{}),sx:{},children:(0,g.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{maxWidth:"100%"},flexGrow:1,children:[(0,g.jsx)(s.Z,{sx:{textOverflow:"ellipsis",overflow:"hidden"},children:t}),r]})}),(0,g.jsx)(K,{children:i})]})},ee=t(1161),ne=t(2207),te=t(9281),re=t(6890),ie=t(7488),ae=t(5574),se=t(5661),le=t(9157),oe=t(1691),ce=t(7123),de=t(3239),ue=t(8005),xe=t(6871),me=t(2898),fe=t(7247),he=t(2419),pe=t(1286),Ze=t(3694),ge=function(e){var n=e.exercise,t=e.training_id,r=e.exerciseIndex,i=e.exercises,l=e.setExerciseDialogState,o=n.series.map((function(e){return e.quantity})).join(", "),d=(0,N.useState)(!1),u=(0,c.Z)(d,2),x=u[0],m=u[1],f=(0,p.T)(),Z=(0,xe.TH)(),j=(0,h.MZ)(),S=(0,c.Z)(j,1)[0],b=(0,Ze.k)(),C="exercise_".concat(n._id),w=function(){m(!1)},k=function(){var e=(0,v.Z)(y().mark((function e(){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=(0,R.Z)(i)).splice(r,1),e.next=5,f((0,ue.rK)({_id:t,exercises:n,urlQuery:Z.search})).unwrap();case 5:b("Exercise deleted","info"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to add exercise:",e.t0);case 11:return e.prev=11,w(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(X,{summaryId:C,summaryText:"".concat(n.name,": [").concat(o.length?o:"no series","]"),summaryIcons:(0,g.jsx)(a.Z,{sx:{position:"relative",width:"5rem"},onClick:function(e){return e.stopPropagation()},children:(0,g.jsxs)(ee.Z,{ariaLabel:"Edit options",direction:"left",FabProps:{size:"small",color:"primary"},sx:{position:"absolute",top:"0px",right:"0px",transform:"translateY(-50%)","& .MuiButtonBase-root":{width:"2rem",height:"2rem",minHeight:"unset"}},icon:(0,g.jsx)(me.Z,{}),children:[(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(fe.Z,{}),tooltipTitle:"Delete exercise",onClick:function(e){m(!0)}}),(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(he.Z,{}),tooltipTitle:"Add exercise",onClick:function(){l({open:!0,index:r})}}),(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(pe.Z,{}),tooltipTitle:"Edit exercise",onClick:function(){l({open:!0,index:r,initialValues:n})}})]})}),children:(0,g.jsxs)(te.Z,{component:"table",sx:{"& .MuiTableCell-root":{pl:"0.25rem",pr:"0.25rem",textAlign:"center"}},children:[(0,g.jsx)(re.Z,{children:(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Nr"})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Load\xa0(kg)"})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Quantity"})})]})}),(0,g.jsx)(ie.Z,{children:n.series.map((function(e,n){return(0,g.jsx)(z,{element:e,index:n},e._id)}))})]})}),(0,g.jsxs)(ae.Z,{open:x,onClose:w,"aria-labelledby":"delete-exercise-dialog-title","aria-describedby":"delete-exercise-dialog-description",children:[(0,g.jsx)(se.Z,{id:"delete-exercise-dialog-title",children:"Delete exercise confirmation"}),(0,g.jsx)(le.Z,{children:(0,g.jsxs)(oe.Z,{id:"delete-exercise-dialog-description",children:["Do you really want to delete exercise"," ",(0,g.jsx)("strong",{children:n.name}),"?"]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:w,children:"No"}),(0,g.jsxs)(I.Z,{onClick:k,autoFocus:!0,disabled:"IDLE"!==S,children:["PROCESSING"===S&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},je=t(1889),ve=function(e){var n=e.onClick;return(0,g.jsx)(w.Z,{"aria-label":"delete",onClick:n,children:(0,g.jsx)(fe.Z,{})})},Se=t(9276),be=t(9823),ye=t(3880),Ce=t(4647),we=function(e){var n=e.trigger,t=e.triggerNewSeriesValidation,r=e.indexForValidationTrigger;return(0,N.useEffect)((function(){null!==r&&n("series.".concat(r,".quantity"),{})}),[t,r,n]),(0,N.useEffect)((function(){n()}),[]),null},ke=function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(e.target.value.match(/^\d*$/)||r&&"-"===e.target.value)&&n(t,e.target.value,{shouldValidate:!0})},Ie=function(e){var n=e.exerciseDialogState,t=e.setExerciseDialogState,r=e.trainingSession,i=(0,Ze.k)(),a=(0,h.MZ)(),d=(0,c.Z)(a,1)[0],u=(0,p.T)(),x=(0,xe.TH)(),m=(0,N.useRef)(!1),f=(0,N.useState)(null),Z=(0,c.Z)(f,2),j=Z[0],S=Z[1],b=(0,N.useState)(!1),C=(0,c.Z)(b,2),D=C[0],E=C[1],T=(0,F.cI)({defaultValues:n.initialValues?{name:n.initialValues.name,comment:n.initialValues.comment,series:n.initialValues.series.reduce((function(e,n){return e.concat([{key:(0,Ce.x0)(),load:n.load,quantity:n.quantity}])}),[])}:{name:"",comment:"",series:[]},mode:"all",criteriaMode:"firstError",shouldUnregister:!0}),_=T.handleSubmit,M=T.setValue,P=T.control,V=T.trigger,L=T.formState,B=L.isSubmitting,q=L.isValid,z=(0,F.Dq)({control:P,name:"series",shouldUnregister:!0}),Q=z.fields,G=z.append,W=z.remove,U=z.insert,H=function(){var e=(0,v.Z)(y().mark((function e(t){var i,a,s,l,c,d,u;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=10;break}return m.current=!0,e.prev=2,(u=(0,R.Z)(null!==(i=null===r||void 0===r?void 0:r.exercises)&&void 0!==i?i:[])).splice((null!==(a=n.index)&&void 0!==a?a:null===r||void 0===r?void 0:r.exercises.length)||0,n.initialValues?1:0,(0,o.Z)((0,o.Z)({},null!==n&&void 0!==n&&null!==(s=n.initialValues)&&void 0!==s&&s._id?{_id:n.initialValues._id}:void 0),{},{name:null!==(l=t.name)&&void 0!==l?l:"",comment:null!==(c=t.comment)&&void 0!==c?c:"",series:null!==(d=t.series.reduce((function(e,n){return e.concat([{load:"-"!==n.load&&n.load?n.load:0,quantity:n.quantity?n.quantity:0}])}),[]))&&void 0!==d?d:[]})),e.next=7,$(u);case 7:return e.prev=7,m.current=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(n){return e.apply(this,arguments)}}(),Y=function(){t({open:!1})},$=function(){var e=(0,v.Z)(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u((0,ue.rK)({_id:null!==r&&void 0!==r&&r._id?r._id:"",exercises:t,urlQuery:x.search})).unwrap();case 3:i(n.initialValues?"Exercise Updated":"Exercise Added","success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to add exercise: ",e.t0);case 9:return e.prev=9,Y(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(ae.Z,{open:n.open,onClose:Y,scroll:"paper","aria-labelledby":"add-edit-exercise-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(se.Z,{id:"add-edit-exercise-dialog-title",children:[n.initialValues?"Update Exercise":"Add Exercise",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:Y,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(be.Z,{})})]}),(0,g.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:_(H),children:[(0,g.jsxs)(le.Z,{dividers:!0,sx:{opacity:"PROCESSING"===d?.5:1},children:[(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"name",margin:"dense",fullWidth:!0,label:"Exercise name",variant:"filled",inputProps:{maxLength:100},autoFocus:!0},(0,ye.d)(n,t)))},name:"name",control:P,rules:{required:"Required",maxLength:{value:100,message:"Max length is ".concat(100," characters")}}}),(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"comment",margin:"dense",fullWidth:!0,label:"Exercise comment",multiline:!0,variant:"filled",inputProps:{maxLength:255}},(0,ye.d)(n,t)))},name:"comment",control:P,rules:{maxLength:{value:255,message:"Max length is ".concat(255," characters")}}}),Q&&Q.length>0?(0,g.jsx)(l.Z,{children:(0,g.jsxs)(te.Z,{component:"table",sx:{"& .MuiTableCell-root":{padding:"0 0.25rem",textAlign:"center"},"& .MuiTableCell-body":{padding:"0.4rem 0.25rem"}},children:[(0,g.jsx)(re.Z,{children:(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{}),(0,g.jsx)(O.Z,{children:"Nr"}),(0,g.jsx)(O.Z,{children:"Load\xa0(kg)"}),(0,g.jsx)(O.Z,{children:"Quantity"}),(0,g.jsx)(O.Z,{})]})}),(0,g.jsx)(ie.Z,{children:Q.map((function(e,n){return(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:(0,g.jsx)(w.Z,{type:"button","aria-label":"delete series",onClick:function(){return W(n)},children:(0,g.jsx)(fe.Z,{})})}),(0,g.jsx)(O.Z,{children:(0,g.jsxs)(s.Z,{variant:"h5",children:[" ",n+1]})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}},(0,ye.d)(n,t)),{},{onChange:function(e){ke(e,M,n.name,!0)}}))},name:"series.".concat(n,".load"),control:P,rules:{validate:{inAllowRange:function(e){if("-"!==e){var n=Number(e);if(Number.isNaN(n)||n<0||n>999)return"<0,999>"}return!0}}}})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}},(0,ye.d)(n,t)),{},{onChange:function(e){ke(e,M,n.name,!1)}}))},name:"series.".concat(n,".quantity"),control:P,rules:{required:"Required",validate:{inAllowRange:function(e){var n=Number(e);return!(Number.isNaN(n)||n<1||n>999)||"<1,999>"}}}})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(w.Z,{type:"button","aria-label":"add series",onClick:function(){U(n,{key:(0,Ce.x0)(),load:"",quantity:""}),S(n),E((function(e){return!e}))},children:(0,g.jsx)(he.Z,{})})})]},e.id)}))})]})}):void 0,(0,g.jsx)(I.Z,{type:"button",variant:"outlined",startIcon:(0,g.jsx)(he.Z,{}),onClick:function(){G({key:(0,Ce.x0)(),load:"",quantity:""}),S(Q.length),E((function(e){return!e}))},sx:{mt:Q.length>0?"1.6rem":"0.4rem",mb:"0.8rem"},children:"Add series"})]}),(0,g.jsx)(we,{trigger:V,triggerNewSeriesValidation:D,indexForValidationTrigger:j})]}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{type:"button",onClick:Y,children:"Cancel"}),(0,g.jsx)("button",{type:"submit",children:"test"}),(0,g.jsxs)(I.Z,{type:"submit",size:"large",disabled:B||!q||"PROCESSING"===d,children:["PROCESSING"===d&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),n.initialValues?"Update":"Add"]})]})]})]})},De=function(e){var n=new Date(e),t=String(n.getFullYear()),r=String(n.getMonth()+1),i=String(n.getDate()),a=String(n.getHours()),s=String(n.getMinutes()),l=function(e){return e.length<2?"0"+e:e};return r=l(r),i=l(i),a=l(a),s=l(s),"".concat(i,"-").concat(r,"-").concat(t," ").concat(a,":").concat(s)},Ee=function(e){var n=e._id,t=(0,p.C)((function(e){return(0,h.Th)(e,n)})),r=N.useState(!1),i=(0,c.Z)(r,2),a=i[0],s=i[1],l=N.useState({open:!1}),o=(0,c.Z)(l,2),d=o[0],u=o[1],m=(0,p.T)(),f=(0,xe.TH)(),j=(0,x.lr)(),S=(0,c.Z)(j,2)[1],b=(0,Ze.k)(),C=(0,h.MZ)(),w=(0,c.Z)(C,1)[0],k="session_".concat(n),D="";t&&(D=De(t.date));var E=function(){s(!1)},T=function(){var e=(0,v.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m((0,ue.j7)({_id:n,query:f.search?f.search:Z.rg,setSearchParams:S}));case 3:b("Training session deleted","info"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to delete training session:",e.t0);case 9:return e.prev=9,E(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(je.ZP,{component:"li",item:!0,sx:{maxWidth:"100%"},children:[(0,g.jsxs)(X,{summaryId:k,summaryText:D,summaryIcons:(0,g.jsx)(ve,{onClick:function(e){e.stopPropagation(),s(!0)}}),children:[null===t||void 0===t?void 0:t.exercises.map((function(e,n){return(0,g.jsx)(ge,{exercise:e,training_id:t._id,exerciseIndex:n,exercises:t.exercises,setExerciseDialogState:u},e._id)})),(0,g.jsx)(Se.Z,{sx:{display:"flex",justifyContent:"center",mt:"1.5rem",mb:"0.5rem","&:first-of-type":{m:"1rem 0"}},children:(0,g.jsx)(I.Z,{variant:"outlined",startIcon:(0,g.jsx)(he.Z,{}),onClick:function(){return u({open:!0})},children:"Add Exercise"})})]}),d.open&&(0,g.jsx)(Ie,{exerciseDialogState:d,setExerciseDialogState:u,trainingSession:t}),(0,g.jsxs)(ae.Z,{open:a,onClose:E,"aria-labelledby":"delete-training-session-dialog-title","aria-describedby":"delete-training-session-dialog-description",children:[(0,g.jsx)(se.Z,{id:"delete-training-session-dialog-title",children:"Delete training confirmation"}),(0,g.jsx)(le.Z,{children:(0,g.jsxs)(oe.Z,{id:"delete-training-session-dialog-description",children:["Do you really want to delete training from"," ",(0,g.jsx)("strong",{children:t?De(t.date):""}),"?"]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:E,children:"No"}),(0,g.jsxs)(I.Z,{onClick:T,autoFocus:!0,disabled:"IDLE"!==w,children:["PROCESSING"===w&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},Te=N.memo(Ee),Ne=t(9658);var Fe=function(){var e=(0,h.MZ)(),n=(0,c.Z)(e,1)[0],t=(0,h.mh)(),r=(0,p.T)(),i=(0,x.lr)(),l=(0,c.Z)(i,1)[0],o=(0,N.useState)(!1),d=(0,c.Z)(o,2),u=d[0],m=d[1],f=l.toString();(0,N.useEffect)((function(){var e=null,n=function(){var n=(0,v.Z)(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=r((0,ue.LH)({searchParams:f})),n.next=4,e;case 4:return n.prev=4,u||m(!0),n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[0,,4,7]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){var n;"function"===typeof(null===(n=e)||void 0===n?void 0:n.abort)&&e.abort()}}),[f,r]);var Z=null;if("FAILED"===n&&u)Z=(0,g.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(Ne.Z,{variant:"filled",severity:"error",children:"Operation failed, no data."})});else{var j=null;u&&(t.length?j=(0,g.jsx)(a.Z,{sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsx)(je.ZP,{component:"ul",container:!0,direction:"column",rowSpacing:{xs:1,sm:2,md:3},sx:{listStyle:"none","& >.MuiGrid-item":{maxWidth:"100%"}},children:null===t||void 0===t?void 0:t.map((function(e){return(0,g.jsx)(Te,{_id:e},e)}))})}):"IDLE"===n&&(j=(0,g.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(Ne.Z,{variant:"filled",severity:"info",children:"No data."})}))),Z=(0,g.jsxs)(a.Z,{sx:{position:"relative"},children:[j,"PROCESSING"!==n||t.length?null:(0,g.jsxs)(a.Z,{sx:{position:"absolute",top:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"20rem",height:"100%"},children:[(0,g.jsx)(de.Z,{size:120,sx:{marginBottom:"1rem"}}),(0,g.jsx)(s.Z,{children:"Loading..."})]})]})}return(0,g.jsx)(a.Z,{mt:"1.5rem",children:Z})},_e=t(9877),Me=function(){var e=(0,h.MZ)(),n=(0,c.Z)(e,1)[0],t=(0,N.useState)("IDLE"),r=(0,c.Z)(t,2)[1],i=(0,p.T)(),a=(0,xe.TH)(),s=(0,N.useState)(!1),d=(0,c.Z)(s,2),u=d[0],x=d[1],m=(0,N.useRef)(!1),f=(0,F.cI)({defaultValues:{date:new Date,comment:""},mode:"all",criteriaMode:"firstError",shouldUnregister:!0}),Z=f.handleSubmit,j=f.control,S=f.formState,b=S.isValid,C=S.isSubmitting,D=(0,Ze.k)(),E=function(){x(!1)},T=function(){var e=(0,v.Z)(y().mark((function e(n,t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r("PROCESSING"),e.next=4,i((0,ue.fs)({trainingSession:{date:n.toISOString(),comment:t,exercises:[]},urlQuery:a.search})).unwrap();case 4:D("Training session added","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to add new training session:",e.t0);case 10:return e.prev=10,r("IDLE"),E(),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(n,t){return e.apply(this,arguments)}}(),_=function(){var e=(0,v.Z)(y().mark((function e(n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=9;break}return m.current=!0,e.prev=2,e.next=5,T(n.date,n.comment);case 5:return e.prev=5,m.current=!1,E(),e.finish(5);case 9:case"end":return e.stop()}}),e,null,[[2,,5,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_e.Z,{size:"medium",color:"secondary","aria-label":"add training session",sx:{marginLeft:"auto"},onClick:function(){x(!0)},children:(0,g.jsx)(he.Z,{})}),(0,g.jsxs)(ae.Z,{open:u,onClose:E,scroll:"paper","aria-labelledby":"add-training-session-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(se.Z,{id:"add-training-session-dialog-title",children:["Add Training Session",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:E,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(be.Z,{})})]}),(0,g.jsxs)("form",{noValidate:!0,onSubmit:Z(_),children:[(0,g.jsx)(le.Z,{dividers:!0,sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(B,{field:n,fieldState:t})},name:"date",control:j,rules:{validate:(0,o.Z)({},L)}}),(0,g.jsx)(F.Qr,{render:function(e){var n=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"comment",margin:"normal",fullWidth:!0,label:"Comment",multiline:!0,variant:"filled",autoFocus:!0,inputProps:{maxLength:255}},(0,ye.d)(n,t)))},name:"comment",control:j,rules:{maxLength:{value:255,message:"Max length is ".concat(255," characters")}}})]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{type:"button",onClick:E,children:"Cancel"}),(0,g.jsxs)(I.Z,{type:"submit",size:"large",disabled:C||!b||"PROCESSING"===n,children:["PROCESSING"===n&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Add"]})]})]})]})]})},Pe=t(7672),Ve=t(8096),Le=t(4925),Be=t(9321),qe=t(3786),Re=function(e){var n=(0,N.useState)((function(){return e})),t=(0,c.Z)(n,2),r=t[0],i=t[1];return(0,N.useLayoutEffect)((function(){r!==e&&i(e)}),[e]),[r,i]},Ae=function(e){return(0,Z.jr)(e,Z.T4,Z.D$)},Oe=function(e,n,t,r){var i=(0,f.Z)(e.toString(),t,r);n(i=(0,f.Z)(i,Z.eB.page))},ze=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=Ae((0,m.Z)(t.get(Z.eB.items))),a=Re(i),s=(0,c.Z)(a,2),l=s[0],o=s[1];return(0,g.jsxs)(Ve.Z,{variant:"standard",sx:{m:1,minWidth:"5rem"},children:[(0,g.jsx)(Le.Z,{id:"nr-of-items-on-page-label",children:"Show Items"}),(0,g.jsxs)(Be.Z,{labelId:"nr-of-items-on-page-label",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=Ae(Number(e.target.value));o(n),Oe(t,r,Z.eB.items,String(n))},label:"Show Items",children:[(0,g.jsx)(qe.Z,{value:Z.T4,children:Z.T4}),(0,g.jsx)(qe.Z,{value:Z.Mt,children:Z.Mt}),(0,g.jsx)(qe.Z,{value:Z.v$,children:Z.v$})]})]})},Qe=function(e){return(0,Z.jr)(e,Z.iQ,Z.cv)},Ge=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),t=n[0],r=n[1],i=Qe(t.get(Z.eB.sortDateOrder)),a=Re(i),s=(0,c.Z)(a,2),l=s[0],o=s[1];return(0,g.jsxs)(Ve.Z,{variant:"standard",sx:{m:0,minWidth:120},children:[(0,g.jsx)(Le.Z,{id:"trainings-sort-order",children:"Sort"}),(0,g.jsxs)(Be.Z,{labelId:"trainings-sort-order",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=Qe(e.target.value);o(n),Oe(t,r,Z.eB.sortDateOrder,n)},label:"Sort",children:[(0,g.jsx)(qe.Z,{value:"date-descending",children:"Date descending"}),(0,g.jsx)(qe.Z,{value:"date-ascending",children:"Date ascending"})]})]})},We=function(){var e=(0,r.Z)(),n=(0,i.Z)(e.breakpoints.up("lg"),{noSsr:!0});return(0,Pe.Z)("Trainings"),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(a.Z,{component:"section",children:[(0,g.jsxs)(Y,{sx:{mb:3},children:[(0,g.jsx)($,{expandIcon:(0,g.jsx)(J.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,g.jsx)(s.Z,{children:"Filters"})}),(0,g.jsx)(K,{sx:{mb:{xs:"1.3rem",lg:"0.5rem"},pt:"1.5rem"},children:(0,g.jsxs)(l.Z,{direction:n?"row":"column",alignItems:n?"start":"center",justifyContent:n?"space-between":"center",spacing:5,sx:{flexWrap:"wrap"},children:[(0,g.jsx)(q,{}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,sx:{},children:[(0,g.jsx)(ze,{}),(0,g.jsx)(Ge,{})]})]})})]}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{mt:"1rem"},children:[(0,g.jsx)(j,{}),(0,g.jsx)(Me,{})]})]}),(0,g.jsxs)(a.Z,{component:"section",sx:{maxWidth:"100%",mt:"1rem"},children:[(0,g.jsx)(s.Z,{variant:"h5",component:"h1",children:"Trainings:"}),(0,g.jsx)(Fe,{})]})]})}}}]);
//# sourceMappingURL=678.02ad7b71.chunk.js.map