"use strict";(self.webpackChunkmy_training_app=self.webpackChunkmy_training_app||[]).push([[678],{7672:function(e,n,r){var t=r(2791),i=r(6313);n.Z=function(e){var n=(0,i.QB)();return(0,t.useEffect)((function(){n(e)})),null}},7678:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ge}});var t=r(3967),i=r(5193),a=r(8870),s=r(890),l=r(3767),o=r(1413),c=r(9439),d=r(1333),u=r(6563),x=r(3504),m=r(2829),f=r(1993),h=r(1661),Z=r(3459),p=r(6872),g=r(184),j=function(){var e=(0,Z.C)(h.t2),n=(0,x.lr)(),r=(0,c.Z)(n,1)[0],t=(0,m.Z)(r.get(p.eB.page));return(null===t||t<=0)&&(t=1),(0,g.jsx)(d.Z,{size:"small",page:t,count:e||1,color:"primary",siblingCount:1,renderItem:function(e){var n=(0,f.Z)(r.toString(),p.eB.page,String(e.page));return(0,g.jsx)(u.Z,(0,o.Z)((0,o.Z)({},e),{},{component:x.rU,to:n}))}})},v=r(5861),S=r(5987),b=r(7757),y=r.n(b),C=r(3099),w=r(3400),k=r(7391),I=r(6151),D=function(e){var n=e.getFullYear(),r=e.getMonth()+1,t=e.getDate(),i=String(n),a=String(r);a.length<2&&(a="0"+a);var s=String(t);return s.length<2&&(s="0"+s),"".concat(i,"-").concat(a,"-").concat(s)},E=function(e){return e instanceof Date&&!Number.isNaN(Number(e))},T=r(22),N=r(2791),_=r(1134),F=["field","fieldState"],M=new Date(Date.UTC(2e3,1,1,0,0,0)),P=function(e){var n=e.removeFilterByDateFromUrl,r=e.reset;return(0,g.jsx)(w.Z,{"aria-label":"clear filter",onClick:function(){r(),n()},children:(0,g.jsx)(T.Z,{sx:{fontSize:"3rem"}})})},L=function(e,n){return(0,N.useEffect)((function(){var r=function(e,r){var t=function(e){var n=e.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(Number(null===n||void 0===n?void 0:n[1]),Number(null===n||void 0===n?void 0:n[2])-1,Number(null===n||void 0===n?void 0:n[3]))}(e);E(t)&&n(r,t,{shouldValidate:!0})};if(e){var t=e.match(/from-(\d{4}-\d{2}-\d{2})-to-(\d{4}-\d{2}-\d{2})/);null!==t&&void 0!==t&&t[1]&&r(t[1],"start-date"),null!==t&&void 0!==t&&t[2]&&r(t[2],"end-date")}else n("start-date",null),n("end-date",null)}),[e]),null},B={validDate:function(e){return!!e&&E(e)||"Enter valid date"},notFutureDate:function(e){return!!e&&e<new Date||"Future date not allowed"},notBeforeMinAllowedDate:function(e){return!!e&&e>M||"Date before ".concat(M.toLocaleString("pl-PL",{timeZone:"UTC"}).split(",")[0])}};function V(e){var n=e.field,r=e.fieldState,t=(0,S.Z)(e,F);return(0,g.jsx)(C.M,(0,o.Z)({mask:"__.__.____",disableFuture:!0,allowSameDateSelection:!0,openTo:"month",views:["year","month","day"],minDate:M,value:n.value,onChange:n.onChange,inputRef:n.ref,renderInput:function(e){var t;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({},e),{},{name:n.name,variant:"standard",error:r.invalid,helperText:r.invalid?null===(t=r.error)||void 0===t?void 0:t.message:" ",onBlur:n.onBlur}))}},t))}var R=function(){var e=(0,t.Z)(),n=(0,i.Z)(e.breakpoints.down("sm"),{noSsr:!0}),r=(0,x.lr)(),s=(0,c.Z)(r,2),d=s[0],u=s[1],m=(0,_.cI)({defaultValues:{"start-date":null,"end-date":null},mode:"onTouched",criteriaMode:"firstError",shouldUnregister:!0}),h=m.handleSubmit,Z=m.reset,j=m.setValue,S=m.control,b=(0,m.watch)("start-date"),C=d.get(p.eB.filterByDate);L(C,j);var w=function(){var e=(0,v.Z)(y().mark((function e(n){var r,t,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=n["start-date"],t=n["end-date"],i=(0,f.Z)(d.toString(),p.eB.filterByDate,"from-"+D(r)+"-to-"+D(t)),u(i)}finally{}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(a.Z,{sx:{pt:"0.0rem",flexGrow:0},children:(0,g.jsx)("form",{noValidate:!0,onSubmit:h(w),children:(0,g.jsxs)(l.Z,{spacing:n?1:3,direction:n?"column":"row",alignItems:"center",justifyContent:"center",sx:{flexWrap:"wrap"},children:[(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(V,{field:n,fieldState:r,label:"Start date"})},name:"start-date",control:S,rules:{validate:(0,o.Z)({},B)}}),(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(V,{field:n,fieldState:r,label:"End date"})},name:"end-date",control:S,rules:{validate:(0,o.Z)((0,o.Z)({},B),{},{afterStartDate:function(e){return null!==e&&null!==b&&e>b||"End date after start date"}})}}),(0,g.jsxs)(a.Z,{children:[(0,g.jsx)(I.Z,{type:"submit",size:"large",variant:"outlined",children:"Filter"}),d.get(p.eB.filterByDate)?(0,g.jsx)(P,{removeFilterByDateFromUrl:function(){u((0,f.Z)(d.toString(),p.eB.filterByDate))},reset:Z}):null]})]})})})},q=r(3433),A=r(5855),O=r(3449),z=function(e){var n=e.element,r=e.index;return(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:r+1}),(0,g.jsx)(O.Z,{children:n.load&&"-"!==n.load?n.load:"-"}),(0,g.jsx)(O.Z,{children:n.quantity})]})},Q=r(7630),G=r(1478),W=r(1055),U=r(5818),H=r(3721),Y=(0,Q.ZP)((function(e){return(0,g.jsx)(W.Z,(0,o.Z)({elevation:2,square:!0},e))}))((function(e){var n=e.theme;return{border:"1px solid ".concat(n.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}})),$=(0,Q.ZP)((function(e){return(0,g.jsx)(U.Z,(0,o.Z)({expandIcon:(0,g.jsx)(G.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){return{backgroundColor:"dark"===e.theme.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse"}})),K=(0,Q.ZP)(H.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),J=r(1131),X=function(e){var n=e.summaryId,r=e.summaryText,t=e.summaryIcons,i=e.children,a=(0,N.useState)(!1),o=(0,c.Z)(a,2),d=o[0],u=o[1];return(0,g.jsxs)(Y,{TransitionProps:{unmountOnExit:!0},expanded:d,onChange:function(){return u((function(e){return!e}))},sx:{maxWidth:"100%","& .MuiAccordionSummary-content":{maxWidth:"calc(100% - 24px)"}},children:[(0,g.jsx)($,{"aria-controls":n,id:n,expandIcon:(0,g.jsx)(J.Z,{}),sx:{},children:(0,g.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{maxWidth:"100%"},flexGrow:1,children:[(0,g.jsx)(s.Z,{sx:{textOverflow:"ellipsis",overflow:"hidden"},children:r}),t]})}),(0,g.jsx)(K,{children:i})]})},ee=r(1161),ne=r(2207),re=r(9281),te=r(6890),ie=r(7488),ae=r(5574),se=r(5661),le=r(9157),oe=r(1691),ce=r(7123),de=r(3239),ue=r(8005),xe=r(6871),me=r(2898),fe=r(7247),he=r(2419),Ze=r(1286),pe=r(3694),ge=function(e){var n=e.exercise,r=e.training_id,t=e.exerciseIndex,i=e.exercises,l=e.setExerciseDialogState,o=n.series.map((function(e){return e.quantity})).join(", "),d=(0,N.useState)(!1),u=(0,c.Z)(d,2),x=u[0],m=u[1],f=(0,Z.T)(),p=(0,xe.TH)(),j=(0,h.MZ)(),S=(0,c.Z)(j,1)[0],b=(0,pe.k)(),C="exercise_".concat(n._id),w=function(){m(!1)},k=function(){var e=(0,v.Z)(y().mark((function e(){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=(0,q.Z)(i)).splice(t,1),e.next=5,f((0,ue.rK)({_id:r,exercises:n,urlQuery:p.search})).unwrap();case 5:b("Exercise deleted","info"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to add exercise:",e.t0);case 11:return e.prev=11,w(),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(X,{summaryId:C,summaryText:"".concat(n.name,": [").concat(o.length?o:"no series","]"),summaryIcons:(0,g.jsx)(a.Z,{sx:{position:"relative",width:"5rem"},onClick:function(e){return e.stopPropagation()},children:(0,g.jsxs)(ee.Z,{ariaLabel:"Edit options",direction:"left",FabProps:{size:"small",color:"primary"},sx:{position:"absolute",top:"0px",right:"0px",transform:"translateY(-50%)","& .MuiButtonBase-root":{width:"2rem",height:"2rem",minHeight:"unset"}},icon:(0,g.jsx)(me.Z,{}),children:[(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(fe.Z,{}),tooltipTitle:"Delete exercise",onClick:function(e){m(!0)}}),(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(he.Z,{}),tooltipTitle:"Add exercise",onClick:function(){l({open:!0,index:t})}}),(0,g.jsx)(ne.Z,{icon:(0,g.jsx)(Ze.Z,{}),tooltipTitle:"Edit exercise",onClick:function(){l({open:!0,index:t,initialValues:n})}})]})}),children:(0,g.jsxs)(re.Z,{component:"table",sx:{"& .MuiTableCell-root":{pl:"0.25rem",pr:"0.25rem",textAlign:"center"}},children:[(0,g.jsx)(te.Z,{children:(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Nr"})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Load\xa0(kg)"})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(s.Z,{children:"Quantity"})})]})}),(0,g.jsx)(ie.Z,{children:n.series.map((function(e,n){return(0,g.jsx)(z,{element:e,index:n},e._id)}))})]})}),(0,g.jsxs)(ae.Z,{open:x,onClose:w,"aria-labelledby":"delete-exercise-dialog-title","aria-describedby":"delete-exercise-dialog-description",children:[(0,g.jsx)(se.Z,{id:"delete-exercise-dialog-title",children:"Delete exercise confirmation"}),(0,g.jsx)(le.Z,{children:(0,g.jsxs)(oe.Z,{id:"delete-exercise-dialog-description",children:["Do you really want to delete exercise"," ",(0,g.jsx)("strong",{children:n.name}),"?"]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:w,children:"No"}),(0,g.jsxs)(I.Z,{onClick:k,autoFocus:!0,disabled:"IDLE"!==S,children:["PROCESSING"===S&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},je=r(1889),ve=function(e){var n=e.onClick;return(0,g.jsx)(w.Z,{"aria-label":"delete",onClick:n,children:(0,g.jsx)(fe.Z,{})})},Se=r(9276),be=r(9823),ye=r(3880),Ce=r(4647),we=function(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(e.target.value.match(/^\d*$/)||t&&"-"===e.target.value)&&n(r,e.target.value,{shouldValidate:!0})},ke=function(e){var n=e.exerciseDialogState,r=e.setExerciseDialogState,t=e.trainingSession,i=(0,pe.k)(),a=(0,h.MZ)(),d=(0,c.Z)(a,1)[0],u=(0,Z.T)(),x=(0,xe.TH)(),m=(0,N.useRef)(!1),f=(0,N.useState)(null),p=(0,c.Z)(f,2),j=p[0],S=p[1],b=(0,N.useRef)(null);(0,N.useEffect)((function(){var e;b.current&&(null===b||void 0===b||null===(e=b.current)||void 0===e||e.focus(),b.current=null,S(null))}),[b,j]);var C=(0,_.cI)({defaultValues:n.initialValues?{_id:n.initialValues._id,name:n.initialValues.name,comment:n.initialValues.comment,series:n.initialValues.series.reduce((function(e,n){return e.concat([{key:(0,Ce.x0)(),load:n.load,quantity:n.quantity}])}),[])}:{name:"",comment:"",series:[]},mode:"onTouched",criteriaMode:"firstError",shouldUnregister:!0}),D=C.handleSubmit,E=C.setValue,T=C.control,F=C.formState,M=F.isValid,P=F.isSubmitting,L=(0,_.Dq)({control:T,name:"series",shouldUnregister:!0}),B=L.fields,V=L.append,R=L.remove,z=L.insert,Q=function(){var e=(0,v.Z)(y().mark((function e(r){var i,a,s,l,c,d;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=10;break}return m.current=!0,e.prev=2,(d=(0,q.Z)(null!==(i=null===t||void 0===t?void 0:t.exercises)&&void 0!==i?i:[])).splice((null!==(a=n.index)&&void 0!==a?a:null===t||void 0===t?void 0:t.exercises.length)||0,n.initialValues?1:0,(0,o.Z)((0,o.Z)({},r._id?{_id:r._id}:void 0),{},{name:null!==(s=r.name)&&void 0!==s?s:"",comment:null!==(l=r.comment)&&void 0!==l?l:"",series:null!==(c=r.series.reduce((function(e,n){return e.concat([{load:"-"!==n.load&&n.load?n.load:0,quantity:n.quantity?n.quantity:0}])}),[]))&&void 0!==c?c:[]})),e.next=7,W(d);case 7:return e.prev=7,m.current=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[2,,7,10]])})));return function(n){return e.apply(this,arguments)}}(),G=function(){r({open:!1})},W=function(){var e=(0,v.Z)(y().mark((function e(r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u((0,ue.rK)({_id:null!==t&&void 0!==t&&t._id?t._id:"",exercises:r,urlQuery:x.search})).unwrap();case 3:i(n.initialValues?"Exercise Updated":"Exercise Added","success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to add exercise: ",e.t0);case 9:return e.prev=9,G(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(ae.Z,{open:n.open,onClose:G,scroll:"paper","aria-labelledby":"add-edit-exercise-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(se.Z,{id:"add-edit-exercise-dialog-title",children:[n.initialValues?"Update Exercise":"Add Exercise",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:G,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(be.Z,{})})]}),(0,g.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:D(Q),children:[(0,g.jsx)(le.Z,{dividers:!0,sx:{opacity:"PROCESSING"===d?.5:1},children:(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"name",margin:"dense",fullWidth:!0,label:"Exercise name",variant:"filled",inputProps:{maxLength:100},autoFocus:!0},(0,ye.d)(n,r)))},name:"name",control:T,rules:{required:"Required",maxLength:{value:100,message:"Max length is ".concat(100," characters")}}}),(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"comment",margin:"dense",fullWidth:!0,label:"Exercise comment",multiline:!0,variant:"filled",inputProps:{maxLength:255}},(0,ye.d)(n,r)))},name:"comment",control:T,rules:{maxLength:{value:255,message:"Max length is ".concat(255," characters")}}}),B&&B.length>0?(0,g.jsx)(l.Z,{children:(0,g.jsxs)(re.Z,{component:"table",sx:{"& .MuiTableCell-root":{padding:"0 0.25rem",textAlign:"center"},"& .MuiTableCell-body":{padding:"0.4rem 0.25rem"}},children:[(0,g.jsx)(te.Z,{children:(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{}),(0,g.jsx)(O.Z,{children:"Nr"}),(0,g.jsx)(O.Z,{children:"Load\xa0(kg)"}),(0,g.jsx)(O.Z,{children:"Quantity"}),(0,g.jsx)(O.Z,{})]})}),(0,g.jsx)(ie.Z,{children:B.map((function(e,n){return(0,g.jsxs)(A.Z,{children:[(0,g.jsx)(O.Z,{children:(0,g.jsx)(w.Z,{"aria-label":"delete series",onClick:function(){return R(n)},children:(0,g.jsx)(fe.Z,{})})}),(0,g.jsx)(O.Z,{children:(0,g.jsxs)(s.Z,{variant:"h5",children:[" ",n+1]})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(_.Qr,{render:function(e){var r=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}},(0,ye.d)(r,t)),{},{inputRef:j===n?b:null,onChange:function(e){we(e,E,r.name,!0)}}))},name:"series.".concat(n,".load"),control:T,rules:{validate:{inAllowRange:function(e){if("-"!==e){var n=Number(e);if(Number.isNaN(n)||n<0||n>999)return"<0,999>"}return!0}}}})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(_.Qr,{render:function(e){var r=e.field,t=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)((0,o.Z)({hiddenLabel:!0,size:"small",required:!0,variant:"filled",inputProps:{maxLength:3},sx:{width:"3.5rem",transform:"translateY(0.7rem)","& .MuiFormHelperText-root":{ml:"0.1rem",mt:"0.1rem"},"& .MuiFilledInput-input":{textAlign:"center"}}},(0,ye.d)(r,t)),{},{inputRef:j===n?b:null,onChange:function(e){we(e,E,r.name,!1)}}))},name:"series.".concat(n,".quantity"),control:T,rules:{required:"Required",validate:{inAllowRange:function(e){var n=Number(e);return!(Number.isNaN(n)||n<1||n>999)||"<1,999>"}}}})}),(0,g.jsx)(O.Z,{children:(0,g.jsx)(w.Z,{"aria-label":"add series",onClick:function(){z(n,{key:(0,Ce.x0)(),load:"",quantity:""}),S(n)},children:(0,g.jsx)(he.Z,{})})})]},e.id)}))})]})}):void 0,(0,g.jsx)(I.Z,{variant:"outlined",startIcon:(0,g.jsx)(he.Z,{}),onClick:function(){V({key:(0,Ce.x0)(),load:"",quantity:""}),S(B.length)},sx:{mt:B.length>0?"1.6rem":"0.4rem",mb:"0.8rem"},children:"Add series"})]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:G,children:"Cancel"}),(0,g.jsxs)(I.Z,{type:"submit",size:"large",disabled:P||!M||"PROCESSING"===d,children:["PROCESSING"===d&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),n.initialValues?"Update":"Add"]})]})]})]})},Ie=function(e){var n=new Date(e),r=String(n.getFullYear()),t=String(n.getMonth()+1),i=String(n.getDate()),a=String(n.getHours()),s=String(n.getMinutes()),l=function(e){return e.length<2?"0"+e:e};return t=l(t),i=l(i),a=l(a),s=l(s),"".concat(i,"-").concat(t,"-").concat(r," ").concat(a,":").concat(s)},De=function(e){var n=e._id,r=(0,Z.C)((function(e){return(0,h.Th)(e,n)})),t=N.useState(!1),i=(0,c.Z)(t,2),a=i[0],s=i[1],l=N.useState({open:!1}),o=(0,c.Z)(l,2),d=o[0],u=o[1],m=(0,Z.T)(),f=(0,xe.TH)(),j=(0,x.lr)(),S=(0,c.Z)(j,2)[1],b=(0,pe.k)(),C=(0,h.MZ)(),w=(0,c.Z)(C,1)[0],k="session_".concat(n),D="";r&&(D=Ie(r.date));var E=function(){s(!1)},T=function(){var e=(0,v.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m((0,ue.j7)({_id:n,query:f.search?f.search:p.rg,setSearchParams:S}));case 3:b("Training session deleted","info"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to delete training session:",e.t0);case 9:return e.prev=9,E(),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return(0,g.jsxs)(je.ZP,{component:"li",item:!0,sx:{maxWidth:"100%"},children:[(0,g.jsxs)(X,{summaryId:k,summaryText:D,summaryIcons:(0,g.jsx)(ve,{onClick:function(e){e.stopPropagation(),s(!0)}}),children:[null===r||void 0===r?void 0:r.exercises.map((function(e,n){return(0,g.jsx)(ge,{exercise:e,training_id:r._id,exerciseIndex:n,exercises:r.exercises,setExerciseDialogState:u},e._id)})),(0,g.jsx)(Se.Z,{sx:{display:"flex",justifyContent:"center",mt:"1.5rem",mb:"0.5rem","&:first-of-type":{m:"1rem 0"}},children:(0,g.jsx)(I.Z,{variant:"outlined",startIcon:(0,g.jsx)(he.Z,{}),onClick:function(){return u({open:!0})},children:"Add Exercise"})})]}),d.open&&(0,g.jsx)(ke,{exerciseDialogState:d,setExerciseDialogState:u,trainingSession:r}),(0,g.jsxs)(ae.Z,{open:a,onClose:E,"aria-labelledby":"delete-training-session-dialog-title","aria-describedby":"delete-training-session-dialog-description",children:[(0,g.jsx)(se.Z,{id:"delete-training-session-dialog-title",children:"Delete training confirmation"}),(0,g.jsx)(le.Z,{children:(0,g.jsxs)(oe.Z,{id:"delete-training-session-dialog-description",children:["Do you really want to delete training from"," ",(0,g.jsx)("strong",{children:r?Ie(r.date):""}),"?"]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:E,children:"No"}),(0,g.jsxs)(I.Z,{onClick:T,autoFocus:!0,disabled:"IDLE"!==w,children:["PROCESSING"===w&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Yes"]})]})]})]})},Ee=N.memo(De),Te=r(9658);var Ne=function(){var e=(0,h.MZ)(),n=(0,c.Z)(e,1)[0],r=(0,h.mh)(),t=(0,Z.T)(),i=(0,x.lr)(),l=(0,c.Z)(i,1)[0],o=(0,N.useState)(!1),d=(0,c.Z)(o,2),u=d[0],m=d[1],f=l.toString();(0,N.useEffect)((function(){var e=null,n=function(){var n=(0,v.Z)(y().mark((function n(){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=t((0,ue.LH)({searchParams:f})),n.next=4,e;case 4:return n.prev=4,u||m(!0),n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[0,,4,7]])})));return function(){return n.apply(this,arguments)}}();return n(),function(){var n;"function"===typeof(null===(n=e)||void 0===n?void 0:n.abort)&&e.abort()}}),[f,t]);var p=null;if("FAILED"===n&&u)p=(0,g.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(Te.Z,{variant:"filled",severity:"error",children:"Operation failed, no data."})});else{var j=null;u&&(r.length?j=(0,g.jsx)(a.Z,{sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsx)(je.ZP,{component:"ul",container:!0,direction:"column",rowSpacing:{xs:1,sm:2,md:3},sx:{listStyle:"none","& >.MuiGrid-item":{maxWidth:"100%"}},children:null===r||void 0===r?void 0:r.map((function(e){return(0,g.jsx)(Ee,{_id:e},e)}))})}):"IDLE"===n&&(j=(0,g.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,g.jsx)(Te.Z,{variant:"filled",severity:"info",children:"No data."})}))),p=(0,g.jsxs)(a.Z,{sx:{position:"relative"},children:[j,"PROCESSING"!==n||r.length?null:(0,g.jsxs)(a.Z,{sx:{position:"absolute",top:0,left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",minHeight:"20rem",height:"100%"},children:[(0,g.jsx)(de.Z,{size:120,sx:{marginBottom:"1rem"}}),(0,g.jsx)(s.Z,{children:"Loading..."})]})]})}return(0,g.jsx)(a.Z,{mt:"1.5rem",children:p})},_e=r(9877),Fe=function(){var e=(0,h.MZ)(),n=(0,c.Z)(e,1)[0],r=(0,N.useState)("IDLE"),t=(0,c.Z)(r,2)[1],i=(0,Z.T)(),a=(0,xe.TH)(),s=(0,N.useState)(!1),d=(0,c.Z)(s,2),u=d[0],x=d[1],m=(0,N.useRef)(!1),f=(0,_.cI)({defaultValues:{date:new Date,comment:""},mode:"onTouched",criteriaMode:"firstError",shouldUnregister:!0}),p=f.handleSubmit,j=f.control,S=f.formState,b=S.isValid,C=S.isSubmitting,D=(0,pe.k)(),E=function(){x(!1)},T=function(){var e=(0,v.Z)(y().mark((function e(n,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t("PROCESSING"),e.next=4,i((0,ue.fs)({trainingSession:{date:n.toISOString(),comment:r,exercises:[]},urlQuery:a.search})).unwrap();case 4:D("Training session added","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Failed to add new training session:",e.t0);case 10:return e.prev=10,t("IDLE"),E(),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,7,10,14]])})));return function(n,r){return e.apply(this,arguments)}}(),F=function(){var e=(0,v.Z)(y().mark((function e(n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.current){e.next=9;break}return m.current=!0,e.prev=2,e.next=5,T(n.date,n.comment);case 5:return e.prev=5,m.current=!1,E(),e.finish(5);case 9:case"end":return e.stop()}}),e,null,[[2,,5,9]])})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(_e.Z,{size:"medium",color:"secondary","aria-label":"add training session",sx:{marginLeft:"auto"},onClick:function(){x(!0)},children:(0,g.jsx)(he.Z,{})}),(0,g.jsxs)(ae.Z,{open:u,onClose:E,scroll:"paper","aria-labelledby":"add-training-session-dialog-title",sx:{margin:"0rem"},children:[(0,g.jsxs)(se.Z,{id:"add-training-session-dialog-title",children:["Add Training Session",(0,g.jsx)(w.Z,{"aria-label":"close",onClick:E,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,g.jsx)(be.Z,{})})]}),(0,g.jsxs)("form",{noValidate:!0,onSubmit:p(F),children:[(0,g.jsx)(le.Z,{dividers:!0,sx:{opacity:"PROCESSING"===n?.5:1},children:(0,g.jsxs)(l.Z,{spacing:0,direction:"column",alignItems:"center",children:[(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(V,{field:n,fieldState:r})},name:"date",control:j,rules:{validate:(0,o.Z)({},B)}}),(0,g.jsx)(_.Qr,{render:function(e){var n=e.field,r=e.fieldState;e.formState;return(0,g.jsx)(k.Z,(0,o.Z)({id:"comment",margin:"normal",fullWidth:!0,label:"Comment",multiline:!0,variant:"filled",autoFocus:!0,inputProps:{maxLength:255}},(0,ye.d)(n,r)))},name:"comment",control:j,rules:{maxLength:{value:255,message:"Max length is ".concat(255," characters")}}})]})}),(0,g.jsxs)(ce.Z,{children:[(0,g.jsx)(I.Z,{onClick:E,children:"Cancel"}),(0,g.jsxs)(I.Z,{type:"submit",size:"large",disabled:C||!b||"PROCESSING"===n,children:["PROCESSING"===n&&(0,g.jsx)(de.Z,{size:24,sx:{mr:"0.5rem"}}),"Add"]})]})]})]})]})},Me=r(7672),Pe=r(8096),Le=r(4925),Be=r(9321),Ve=r(3786),Re=function(e){var n=(0,N.useState)((function(){return e})),r=(0,c.Z)(n,2),t=r[0],i=r[1];return(0,N.useLayoutEffect)((function(){t!==e&&i(e)}),[e]),[t,i]},qe=function(e){return(0,p.jr)(e,p.T4,p.D$)},Ae=function(e,n,r,t){var i=(0,f.Z)(e.toString(),r,t);n(i=(0,f.Z)(i,p.eB.page))},Oe=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),r=n[0],t=n[1],i=qe((0,m.Z)(r.get(p.eB.items))),a=Re(i),s=(0,c.Z)(a,2),l=s[0],o=s[1];return(0,g.jsxs)(Pe.Z,{variant:"standard",sx:{m:1,minWidth:"5rem"},children:[(0,g.jsx)(Le.Z,{id:"nr-of-items-on-page-label",children:"Show Items"}),(0,g.jsxs)(Be.Z,{labelId:"nr-of-items-on-page-label",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=qe(Number(e.target.value));o(n),Ae(r,t,p.eB.items,String(n))},label:"Show Items",children:[(0,g.jsx)(Ve.Z,{value:p.T4,children:p.T4}),(0,g.jsx)(Ve.Z,{value:p.Mt,children:p.Mt}),(0,g.jsx)(Ve.Z,{value:p.v$,children:p.v$})]})]})},ze=function(e){return(0,p.jr)(e,p.iQ,p.cv)},Qe=function(){var e=(0,x.lr)(),n=(0,c.Z)(e,2),r=n[0],t=n[1],i=ze(r.get(p.eB.sortDateOrder)),a=Re(i),s=(0,c.Z)(a,2),l=s[0],o=s[1];return(0,g.jsxs)(Pe.Z,{variant:"standard",sx:{m:0,minWidth:120},children:[(0,g.jsx)(Le.Z,{id:"trainings-sort-order",children:"Sort"}),(0,g.jsxs)(Be.Z,{labelId:"trainings-sort-order",id:"nr-of-items-on-page",value:l,onChange:function(e){var n=ze(e.target.value);o(n),Ae(r,t,p.eB.sortDateOrder,n)},label:"Sort",children:[(0,g.jsx)(Ve.Z,{value:"date-descending",children:"Date descending"}),(0,g.jsx)(Ve.Z,{value:"date-ascending",children:"Date ascending"})]})]})},Ge=function(){var e=(0,t.Z)(),n=(0,i.Z)(e.breakpoints.up("lg"),{noSsr:!0});return(0,Me.Z)("Trainings"),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(a.Z,{component:"section",children:[(0,g.jsxs)(Y,{sx:{mb:3},children:[(0,g.jsx)($,{expandIcon:(0,g.jsx)(J.Z,{}),"aria-controls":"filter-content",id:"filter-header",children:(0,g.jsx)(s.Z,{children:"Filters"})}),(0,g.jsx)(K,{sx:{mb:{xs:"1.3rem",lg:"0.5rem"},pt:"1.5rem"},children:(0,g.jsxs)(l.Z,{direction:n?"row":"column",alignItems:n?"start":"center",justifyContent:n?"space-between":"center",spacing:5,sx:{flexWrap:"wrap"},children:[(0,g.jsx)(R,{}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:2,sx:{},children:[(0,g.jsx)(Oe,{}),(0,g.jsx)(Qe,{})]})]})})]}),(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",sx:{mt:"1rem"},children:[(0,g.jsx)(j,{}),(0,g.jsx)(Fe,{})]})]}),(0,g.jsxs)(a.Z,{component:"section",sx:{maxWidth:"100%",mt:"1rem"},children:[(0,g.jsx)(s.Z,{variant:"h5",component:"h1",children:"Trainings:"}),(0,g.jsx)(Ne,{})]})]})}}}]);
//# sourceMappingURL=678.8496f58c.chunk.js.map